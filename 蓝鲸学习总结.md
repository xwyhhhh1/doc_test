## 蓝鲸学习总结

#### 1.产品

+ 基本上大致了解，做了一些基本操作，但是玩得还是有点少
+ 知道了蓝鲸整体的三层结构，iaas、paas、saas这三层基本层，并通过结构图了解到了，之间还有管控平台负责调度计算机资源
+ 了解应用的基本用途

#### 2.文档

+ 详细阅读了部署文档，因为我觉得我仅仅只是搭了个单机，集群式根本没打过，必须要重点看记
+ 了解了一些脚本，蓝鲸基本上组件服务都有自己的脚本，并且文档中也有提到维护的方法
+ 了解了开源服务组件日志的位置，和蓝鲸一般日志的查看方法
+ 稍微了解了组成蓝鲸的一些组件

#### 3.蓝鲸应该注意的脚本

+ $PATH此为解压缩位置，一般默认为/data/下

+ ```shell
   # 这个脚本在$PATH/install/bkli，可以加-h参数去查看他的用法
   $PAT/bkcli -h
     sync module                     synchronize files to target hosts.
     install module [ project ]      installing module
     stop module [ project ]         stop process for module
     start module [ project ]        start process for module
     restart module [ project ]      restart process for module
     status module [project ]        get process running status for module
     initdata module                 init module after install, such as database, permission model etc.
     upgrade module                  upgrade module to new version
     render module                   generater configuration files from templates
     check module                    check service health
   
   ```

+ ```shell
   #此为安装脚本，加-h参数可以查看用法
   $PATH/install/bk_install
     ./bk_install paas         安装 paas 及依赖环境
     ./bk_install app_mgr      安装 appo,appt 及依赖
     ./bk_install cmdb         安装 cmdb 及依赖环境
     ./bk_install job          安装 job 及依赖环境
     ./bk_install ci           安装 蓝盾 及依赖环境
     ./bk_install bkmonitorv3  安装 bkmonitorv3 及依赖环境
     ./bk_install bknodeman    安装 bknodeman 及依赖环境
     ./bk_install bklog        安装 bklog 及依赖环境
     ./bk_install fta          安装 故障自愈后台
     ./bk_install lesscode     安装 可视化开发平台
     ./bk_install saas-[o|t] [APP_CODE[==x.x.x]]  从后台部署 saas 应用
   ```

+ ```shell
   # 此为免密脚本
   bash $PATH/install/configure_ssh_without_pass
   ```

#### 4.consul

1.consul是什么，consul就是提供服务发现的工具，consul是分布式的、高可用、横向扩展的；

2.consul简单的描述图，consul服务发现模块在微服务中的作用。

![Image.png](http://xwyhhhh1.test.upcdn.net/4742055-b5c590e819912447.png)

3.consul的简介

- service discovery：服务费发现，consul通过DNS或者HTTP接口使服务注册和服务发现变的很容易，一些外部服务，例如saas提供的也可以一样注册。
- health checking：健康检测使consul可以快速的告警在集群中的操作。和服务发现的集成，可以防止服务转发到故障的服务上面。
- key/value storage：Key/Value存储，应用程序可以根据自己的需要使用Consul提供的Key/Value存储。 Consul提供了简单易用的HTTP接口，结合其他工具可以实现动态配置、功能标记、领袖选举等等功能。
- multi-datacenter：无需复杂的配置，即可支持任意数量的区域。

4.应用场景

+ 服务发现场景中consul作为注册中心，服务地址被注册到consul中以后，可以使用consul提供的dns、http接口查询，consul支持health check。
+ 服务隔离场景中consul支持以服务为单位设置访问策略，能同时支持经典的平台和新兴的平台，支持tls证书分发，service-to-service加密。
+ 服务配置场景中consul提供key-value数据存储功能，并且能将变动迅速地通知出去，通过工具consul-template可以更方便地实时渲染配置文件。

#### 5.bk-ssm

+ 凭证管理
+ bk-ssm.server:凭证后台管理服务
+ *参考文档*  https://bk.tencent.com/docs/document/6.0/127/7576