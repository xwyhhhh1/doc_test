## 蓝鲸企业版3.0.1 部署文档

### 0.提供License证书所绑定的mac地址（两台服务器）

```shell
00:0C:29:4B:C0:EF
00:0C:29:97:54:7D
```

### 1. 主机及系统环境准备

| 序号 | 主机名 | IP            | 配置  | 备注    |
| ---- | ------ | ------------- | ----- | ------- |
| 1    | node1  | 172.17.20.193 | 8C24G |         |
| 2    | node2  | 172.17.20.153 | 8C24G | license |
| 3    | node3  | 172.17.20.126 | 8C24G |         |
| 4    | node4  | 172.17.20.120 | 8C24G |         |
| 5    | node5  | 172.17.20.123 | 8C24G |         |

操作系统统一使用CentOS7 以上，推介使用 Cent0S7.5.1804

配置时间同步，保证所有服务器上的时间一致

```shell
date -R 

#设置同步时间
#涉及操作的服务器： node1、node2、node3、node4、node5
yum install -y ntpdate
ntpdate time.asia.apple.com
```

关闭所有服务器的SELinux ，保证5台服务器客户互相ping通

```shell
#涉及操作的服务器： node1、node2、node3、node4、node5
#查看SELinux状态
sestatus

#临时关闭SELinux
setenforce 0

#永久关闭SELinux
sed -i 's/SELINUX=enforcing/SELINUX=disabled/g' /etc/selinux/config

#重启服务器
reboot
```

关闭默认防火墙

```shell
#涉及操作的服务器： node1、node2、node3、node4、node5
#检查默认防火墙状态，如果返回not running ，可以跳过后续命令
firewall-cmd --state

#关闭并禁止启动防火墙
systemctl stop firewalld && systemctl disable firewalld
```

停止并禁用NetWorkManager

```shell
#涉及操作的服务器： node1、node2、node3、node4、node5
#停止并禁用NetworkManager
systemctl stop NetworkManager && systemctl disable NetworkManager
```

调整最大文件打开数

```shell
#涉及操作的服务器： node1、node2、node3、node4、node5
#检查当前root账户下的 max open files 的值
ulimit -n

#修改该值，但不能大于/proc/sys/fs/nr_open值，该值默认为1048576
cat >> /etc/security/limits.conf << EOF
root  soft  nofile  102400
root  hard  nofile  102400
EOF

#退出终端登录，再重新登陆
#exit
```

检查是否存在全局HTTP代理

```shell
#检查http_proxy ,https_proxy 变量是否设置
echo "$http_proxy" "$https_proxy"
```

配置服务器yum源

```shell
#涉及操作的服务器： node1、node2、node3、node4、node5
#首先安装wget
yum install -y wget 

#更新配置CentOS-Base源
mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.bak
wget -O /etc/yum.repos.d/CentOS-Base.repo  http://mirrors.cloud.tencent.com/repo/centos7_base.repo

#更新配置epel源
yum install -y  epel-release
mv /etc/yum.repos.d/epel.repo /etc/yum.repos.d/epel.repo.bak
wget -O /etc/yum.repos.d/epel.repo http://mirrors.cloud.tencent.com/repo/epel-7.repo

#更新yum缓存
yum clean all
yum makecache fast

#测试yum安装
yum install -y gcc gcc-c++ wget curl telnet openssl openssl-devel rsync lrzsz
```



### 2.获取蓝鲸企业版3.0.1 部署包及MD5值

```shell
#公共组件包common
#包名：bkee_common-3.0.2.tgz
#MD5：f7dc3b97fcd384962260bbfe5f54f473 

#程序包product
#包名：bkee_product-3.0.1-BRANDMAX.tgz
#md5：d99d11bd8d9c945db3d3cb48514c3f42 

#证书包
#包名：cert_ee-1.2.5_BRANDMAX.tgz
#MD5：fea3ddb3cb2aa1b3b992aa72c5047cc3 

#脚本包
#包名：install_ee-v3.0.7.tgz
#md5：d06d12a8d6d6f6b216dea58abffda4a4 

#上次以上的程序包至服务器

```

> 重要：
>
> 若下载的版本不携带传输协议组件，请参照http://confluence.shlzit.com/pages/%20tapd.tencent.com=%22%22%20bk_enterprise=%22%22%20markdown_wikis=%22%22%20%231120365752005282550 ，补全缺失的开源包，再进行操作。

```shell
#解压程序包
#解压common组件包
mkdir -p /data
tar -xf bkee_common-3.0.2.tgz -C /data
mv /data/src/yum /opt/

#解压product包
tar -xf bkee_product-3.0.1-BRANDMAX.tgz -C /data

#解压安装脚本包
tar -xf install_ee-v3.0.7.tgz -C /data

#解压cert证书包
mkdir -p /data/src/cert
tar -xf cert_ee-1.2.5_BRANDMAX.tgz -C /data/src/cert
```

### 3.更改配置文件

- install.config

```shell
172.17.20.193 license,consul,appo,beanstalk,monitorv3(influxdb-proxy),influxdb(bkmonitorv3),ssm,es7,mongodb,gse,redis,usermgr
172.17.20.153 license,consul,paas,cmdb,beanstalk,monitorv3(influxdb-proxy),monitorv3(monitor),mysql,gse,redis,rabbitmq,appo
172.17.20.126 nginx,zk(config),redis_sentinel,kafka(config),fta,iam,paas,mongodb,monitorv3(transfer),monitorv3(monitor),log(api),log(grafana)
172.17.20.120 nginx,zk(config),redis_sentinel,kafka(config),fta,nfs,influxdb(bkmonitorv3),usermgr,log(api),monitorv3(transfer),job,iam,es7
172.17.20.123 cmdb,job,zk(config),kafka(config),rabbitmq,consul,redis_sentinel,ssm,nodeman(nodeman),monitorv3(grafana),es7,mongodb,appt
```

- global.env

```shell
#编辑 global.env 文件
vi /data/install/bin/03-userdef/global.env
#输入如下内容：
BK_DOMAIN=bktencent.com
BK_PAAS_PUBLIC_ADDR=paas.bktencent.com:80
BK_PAAS_PUBLIC_URL=http://paas.bktencent.com:80
BK_CMDB_PUBLIC_ADDR=cmdb.bktencent.com:80
BK_JOB_PUBLIC_ADDR=job.bktencent.com:80
BK_JOB_PUBLIC_URL=http://job.bktencent.com:80
BK_JOB_API_PUBLIC_URL="http://jobapi.bktencent.com:80"
BK_CMDB_PUBLIC_URL=http://cmdb.bktencent.com:80
BK_GSE_WAN_IP_LIST=172.17.20.153,172.17.20.193
BK_PAAS_ADMIN_PASSWORD=0UzL1ra5nRXm
```

- pip.config

```shell
# vi install/pip/pip.conf
[global]
index-url = https://mirrors.cloud.tencent.com/pypi/simple
trusted-host = mirrors.cloud.tencent.com
```

### 4.验证证书

```shell
#登陆中控机
cd /data/src/cert 
openssl x509 -noout -text -in /data/src/cert/platform.cert  | sed -n '/Subject Alternative Name:/{n;p}'  | grep -Po '\b([a-z0-9]{2}:){5}[a-z0-9]{2}\b'

---
00:0c:29:4b:c0:ef
00:0c:29:97:54:7d

---
#检查主机mac地址和证书mac地址匹配
ip addr |egrep '00:0c:29:4b:c0:ef||00:0c:29:97:54:7d'
```

### 5.安装前的环境检验

```shell
#执行免密,中控机操作
bash /data/install/configure_ssh_without_paas

#解压/data/src下所有模块包
cd /data/src;for f in *gz;do tar -xf $f;done

#补齐开源组件
#java8
cd /data/src
wget https://github.com/Tencent/TencentKona-8/releases/download/8.0.4-GA/TencentKona8.0.4.b11_jdk_linux-x86_64_8u272.tar.gz
mv TencentKona8.0.4.b11_jdk_linux-x86_64_8u272.tar.gz /data/src/java8.tgz 
```

### 6.补充job组件中的jar包

- job-analysis

| 序号 | Jar包名称                        | MD5                              | 下载地址                                                     |
| ---- | -------------------------------- | -------------------------------- | ------------------------------------------------------------ |
| 1    | amqp-client-5.9.0.jar            | 49c1c0c7a8c5d1f8493ea57b0d256061 | https://repo1.maven.org/maven2/com/rabbitmq/amqp-client/5.9.0/amqp-client-5.9.0.jar |
| 2    | annotations-2.0.0.jar            | 14a4ebc50afb20e9520fe502d231809d | https://repo1.maven.org/maven2/com/google/code/findbugs/annotations/2.0.0/annotations-2.0.0.jar |
| 3    | aspectjrt-1.9.6.jar              | 391f9257f19b84b45eb79a1878b9600a | https://repo1.maven.org/maven2/org/aspectj/aspectjrt/1.9.6/aspectjrt-1.9.6.jar |
| 4    | aspectjweaver-1.9.6.jar          | cc461d78c6b67a7c31712c694213b0e1 | https://repo1.maven.org/maven2/org/aspectj/aspectjweaver/1.9.6/aspectjweaver-1.9.6.jar |
| 5    | bcpkix-jdk15on-1.64.jar          | ac323fe2770d772e94bb7bc3249904e5 | https://repo1.maven.org/maven2/org/bouncycastle/bcpkix-jdk15on/1.64/bcpkix-jdk15on-1.64.jar |
| 6    | bcprov-jdk15on-1.64.jar          | 1d172df000184d005b49bc6d30892a05 | https://repo1.maven.org/maven2/org/bouncycastle/bcprov-jdk15on/1.64/bcprov-jdk15on-1.64.jar |
| 7    | HdrHistogram-2.1.12.jar          | 4b1acf3448b750cb485da7e37384fcd8 | https://repo1.maven.org/maven2/org/hdrhistogram/HdrHistogram/2.1.12/HdrHistogram-2.1.12.jar |
| 8    | jakarta.activation-api-1.2.2.jar | 1cbb480310fa1987f9db7a3ed7118af7 | https://repo1.maven.org/maven2/jakarta/activation/jakarta.activation-api/1.2.2/jakarta.activation-api-1.2.2.jar |
| 9    | jakarta.annotation-api-1.3.5.jar | 8b165cf58df5f8c2a222f637c0a07c97 | https://repo1.maven.org/maven2/jakarta/annotation/jakarta.annotation-api/1.3.5/jakarta.annotation-api-1.3.5.jar |
| 10   | jakarta.el-3.0.3.jar             | 6bb54dbf912bf1b6c79592838db76b51 | https://repo1.maven.org/maven2/org/glassfish/jakarta.el/3.0.3/jakarta.el-3.0.3.jar |
| 11   | jakarta.xml.bind-api-2.3.3.jar   | 61286918ca0192e9f87d1358aef718dd | https://repo1.maven.org/maven2/jakarta/xml/bind/jakarta.xml.bind-api/2.3.3/jakarta.xml.bind-api-2.3.3.jar |
| 12   | javax.activation-api-1.2.0.jar   | 5e50e56bcf4a3ef3bc758f69f7643c3b | https://repo1.maven.org/maven2/javax/activation/javax.activation-api/1.2.0/javax.activation-api-1.2.0.jar |
| 13   | javax.servlet-api-4.0.1.jar      | b80414033bf3397de334b95e892a2f44 | https://repo1.maven.org/maven2/javax/servlet/javax.servlet-api/4.0.1/javax.servlet-api-4.0.1.jar |
| 14   | javax.ws.rs-api-2.0.jar          | 3bc8176d36becb7746e1f2594346ed66 | https://repo1.maven.org/maven2/javax/ws/rs/javax.ws.rs-api/2.0/javax.ws.rs-api-2.0.jar |
| 15   | jaxb-api-2.3.1.jar               | bcf270d320f645ad19f5edb60091e87f | https://repo1.maven.org/maven2/javax/xml/bind/jaxb-api/2.3.1/jaxb-api-2.3.1.jar |
| 16   | jchardet-1.0.jar                 | 90c63f0e53e6f714dbc7641e066620e4 | https://repo1.maven.org/maven2/net/sourceforge/jchardet/jchardet/1.0/jchardet-1.0.jar |
| 17   | jersey-apache-client4-1.19.1.jar | f51c2a3b49557e9a7b90e98095f6c045 | https://repo1.maven.org/maven2/com/sun/jersey/contribs/jersey-apache-client4/1.19.1/jersey-apache-client4-1.19.1.jar |
| 18   | jersey-client-1.19.1.jar         | b712cd1d3bb4cef01bb6fc9d5d6ddbe8 | https://repo1.maven.org/maven2/com/sun/jersey/jersey-client/1.19.1/jersey-client-1.19.1.jar |
| 19   | jersey-core-1.19.1.jar           | 577161779fabb561d73388d1ffc46b1f | https://repo1.maven.org/maven2/com/sun/jersey/jersey-core/1.19.1/jersey-core-1.19.1.jar |
| 20   | jsr311-api-1.1.1.jar             | c9803468299ec255c047a280ddec510f | https://repo1.maven.org/maven2/javax/ws/rs/jsr311-api/1.1.1/jsr311-api-1.1.1.jar |
| 21   | LatencyUtils-2.0.3.jar           | 2ad12e1ef7614cecfb0483fa9ac6da73 | https://repo1.maven.org/maven2/org/latencyutils/LatencyUtils/2.0.3/LatencyUtils-2.0.3.jar |
| 22   | logback-classic-1.2.3.jar        | 64f7a68f931aed8e5ad8243470440f0b | https://repo1.maven.org/maven2/ch/qos/logback/logback-classic/1.2.3/logback-classic-1.2.3.jar |
| 23   | logback-core-1.2.3.jar           | 841fc80c6edff60d947a3872a2db4d45 | https://repo1.maven.org/maven2/ch/qos/logback/logback-core/1.2.3/logback-core-1.2.3.jar |
| 24   | mysql-connector-java-8.0.22.jar  | 6eec5916bbd568c335f1737caa556d3d | https://repo1.maven.org/maven2/mysql/mysql-connector-java/8.0.22/mysql-connector-java-8.0.22.jar |
| 25   | reactive-streams-1.0.3.jar       | 69122b098fff1c6b1bf2cd3b355e7e03 | https://repo1.maven.org/maven2/org/reactivestreams/reactive-streams/1.0.3/reactive-streams-1.0.3.jar |

补包操作：

```shell
#涉及操作的服务器： node1(中控机)
#定位到job组件目录，并创建目录
cd /data/src/job
mkdir -p job/backend/job-analysis/BOOT-INF/lib

#进入lib目录，并下载如上jar包文件
cd /data/src/job/backend/job-analysis/BOOT-INF/lib
wget *.jar

#注入
cd /data/src/job/backend/job-analysis/
zip -u0 job-analysis.jar BOOT-INF/lib/*.jar

#验证
#若开源jar包下载完整，注入过程无报错，此时\job\backend\job-analysis目录下的job-analysis.jar包即为可执行完整jar包
```

- job-backup

| 序号 | Jar包名称                        | MD5                              | 下载地址                                                     |
| ---- | -------------------------------- | -------------------------------- | ------------------------------------------------------------ |
| 1    | amqp-client-5.9.0.jar            | 49c1c0c7a8c5d1f8493ea57b0d256061 | https://repo1.maven.org/maven2/com/rabbitmq/amqp-client/5.9.0/amqp-client-5.9.0.jar |
| 2    | annotations-2.0.0.jar            | 14a4ebc50afb20e9520fe502d231809d | https://repo1.maven.org/maven2/com/google/code/findbugs/annotations/2.0.0/annotations-2.0.0.jar |
| 3    | aspectjrt-1.9.6.jar              | 391f9257f19b84b45eb79a1878b9600a | https://repo1.maven.org/maven2/org/aspectj/aspectjrt/1.9.6/aspectjrt-1.9.6.jar |
| 4    | aspectjweaver-1.9.6.jar          | cc461d78c6b67a7c31712c694213b0e1 | https://repo1.maven.org/maven2/org/aspectj/aspectjweaver/1.9.6/aspectjweaver-1.9.6.jar |
| 5    | bcpkix-jdk15on-1.64.jar          | ac323fe2770d772e94bb7bc3249904e5 | https://repo1.maven.org/maven2/org/bouncycastle/bcpkix-jdk15on/1.64/bcpkix-jdk15on-1.64.jar |
| 6    | bcprov-jdk15on-1.64.jar          | 1d172df000184d005b49bc6d30892a05 | https://repo1.maven.org/maven2/org/bouncycastle/bcprov-jdk15on/1.64/bcprov-jdk15on-1.64.jar |
| 7    | HdrHistogram-2.1.12.jar          | 4b1acf3448b750cb485da7e37384fcd8 | https://repo1.maven.org/maven2/org/hdrhistogram/HdrHistogram/2.1.12/HdrHistogram-2.1.12.jar |
| 8    | jakarta.activation-api-1.2.2.jar | 1cbb480310fa1987f9db7a3ed7118af7 | https://repo1.maven.org/maven2/jakarta/activation/jakarta.activation-api/1.2.2/jakarta.activation-api-1.2.2.jar |
| 9    | jakarta.annotation-api-1.3.5.jar | 8b165cf58df5f8c2a222f637c0a07c97 | https://repo1.maven.org/maven2/jakarta/annotation/jakarta.annotation-api/1.3.5/jakarta.annotation-api-1.3.5.jar |
| 10   | jakarta.el-3.0.3.jar             | 6bb54dbf912bf1b6c79592838db76b51 | https://repo1.maven.org/maven2/org/glassfish/jakarta.el/3.0.3/jakarta.el-3.0.3.jar |
| 11   | jakarta.xml.bind-api-2.3.3.jar   | 61286918ca0192e9f87d1358aef718dd | https://repo1.maven.org/maven2/jakarta/xml/bind/jakarta.xml.bind-api/2.3.3/jakarta.xml.bind-api-2.3.3.jar |
| 12   | javax.activation-api-1.2.0.jar   | 5e50e56bcf4a3ef3bc758f69f7643c3b | https://repo1.maven.org/maven2/javax/activation/javax.activation-api/1.2.0/javax.activation-api-1.2.0.jar |
| 13   | javax.servlet-api-4.0.1.jar      | b80414033bf3397de334b95e892a2f44 | https://repo1.maven.org/maven2/javax/servlet/javax.servlet-api/4.0.1/javax.servlet-api-4.0.1.jar |
| 14   | javax.ws.rs-api-2.0.jar          | 3bc8176d36becb7746e1f2594346ed66 | https://repo1.maven.org/maven2/javax/ws/rs/javax.ws.rs-api/2.0/javax.ws.rs-api-2.0.jar |
| 15   | jaxb-api-2.3.1.jar               | bcf270d320f645ad19f5edb60091e87f | https://repo1.maven.org/maven2/javax/xml/bind/jaxb-api/2.3.1/jaxb-api-2.3.1.jar |
| 16   | jchardet-1.0.jar                 | 90c63f0e53e6f714dbc7641e066620e4 | https://repo1.maven.org/maven2/net/sourceforge/jchardet/jchardet/1.0/jchardet-1.0.jar |
| 17   | jersey-apache-client4-1.19.1.jar | f51c2a3b49557e9a7b90e98095f6c045 | https://repo1.maven.org/maven2/com/sun/jersey/contribs/jersey-apache-client4/1.19.1/jersey-apache-client4-1.19.1.jar |
| 18   | jersey-client-1.19.1.jar         | b712cd1d3bb4cef01bb6fc9d5d6ddbe8 | https://repo1.maven.org/maven2/com/sun/jersey/jersey-client/1.19.1/jersey-client-1.19.1.jar |
| 19   | jersey-core-1.19.1.jar           | 577161779fabb561d73388d1ffc46b1f | https://repo1.maven.org/maven2/com/sun/jersey/jersey-core/1.19.1/jersey-core-1.19.1.jar |
| 20   | jsr311-api-1.1.1.jar             | c9803468299ec255c047a280ddec510f | https://repo1.maven.org/maven2/javax/ws/rs/jsr311-api/1.1.1/jsr311-api-1.1.1.jar |
| 21   | LatencyUtils-2.0.3.jar           | 2ad12e1ef7614cecfb0483fa9ac6da73 | https://repo1.maven.org/maven2/org/latencyutils/LatencyUtils/2.0.3/LatencyUtils-2.0.3.jar |
| 22   | logback-classic-1.2.3.jar        | 64f7a68f931aed8e5ad8243470440f0b | https://repo1.maven.org/maven2/ch/qos/logback/logback-classic/1.2.3/logback-classic-1.2.3.jar |
| 23   | logback-core-1.2.3.jar           | 841fc80c6edff60d947a3872a2db4d45 | https://repo1.maven.org/maven2/ch/qos/logback/logback-core/1.2.3/logback-core-1.2.3.jar |
| 24   | mysql-connector-java-8.0.22.jar  | 6eec5916bbd568c335f1737caa556d3d | https://repo1.maven.org/maven2/mysql/mysql-connector-java/8.0.22/mysql-connector-java-8.0.22.jar |
| 25   | reactive-streams-1.0.3.jar       | 69122b098fff1c6b1bf2cd3b355e7e03 | https://repo1.maven.org/maven2/org/reactivestreams/reactive-streams/1.0.3/reactive-streams-1.0.3.jar |

补包操作：

```shell
#涉及操作的服务器： node1(中控机)
#定位到job组件目录，并创建目录
cd /data/src/job
mkdir -p job/backend/job-backup/BOOT-INF/lib

#进入lib目录，并下载如上jar包文件
cd /data/src/job/backend/job-backup/BOOT-INF/lib
wget *.jar

#注入
cd /data/src/job/backend/job-backup/
zip -u0 job-backup.jar BOOT-INF/lib/*.jar

#验证
#若开源jar包下载完整，注入过程无报错，此时\job\backend\job-backup目录下的job-backup.jar包即为可执行完整jar包
```

- job-config.jar

| 序号 | Jar包名称                                             | MD5                              | 下载地址                                                     |
| ---- | ----------------------------------------------------- | -------------------------------- | ------------------------------------------------------------ |
| 1    | annotations-2.0.0.jar                                 | 14a4ebc50afb20e9520fe502d231809d | https://repo1.maven.org/maven2/com/google/code/findbugs/annotations/2.0.0/annotations-2.0.0.jar |
| 2    | aspectjrt-1.9.6.jar                                   | 391f9257f19b84b45eb79a1878b9600a | https://repo1.maven.org/maven2/org/aspectj/aspectjrt/1.9.6/aspectjrt-1.9.6.jar |
| 3    | aspectjweaver-1.9.6.jar                               | cc461d78c6b67a7c31712c694213b0e1 | https://repo1.maven.org/maven2/org/aspectj/aspectjweaver/1.9.6/aspectjweaver-1.9.6.jar |
| 4    | bcpkix-jdk15on-1.64.jar                               | ac323fe2770d772e94bb7bc3249904e5 | https://repo1.maven.org/maven2/org/bouncycastle/bcpkix-jdk15on/1.64/bcpkix-jdk15on-1.64.jar |
| 5    | bcprov-jdk15on-1.64.jar                               | 1d172df000184d005b49bc6d30892a05 | https://repo1.maven.org/maven2/org/bouncycastle/bcprov-jdk15on/1.64/bcprov-jdk15on-1.64.jar |
| 6    | HdrHistogram-2.1.12.jar                               | 4b1acf3448b750cb485da7e37384fcd8 | https://repo1.maven.org/maven2/org/hdrhistogram/HdrHistogram/2.1.12/HdrHistogram-2.1.12.jar |
| 7    | jakarta.annotation-api-1.3.5.jar                      | 8b165cf58df5f8c2a222f637c0a07c97 | https://repo1.maven.org/maven2/jakarta/annotation/jakarta.annotation-api/1.3.5/jakarta.annotation-api-1.3.5.jar |
| 8    | jakarta.el-3.0.3.jar                                  | 6bb54dbf912bf1b6c79592838db76b51 | https://repo1.maven.org/maven2/org/glassfish/jakarta.el/3.0.3/jakarta.el-3.0.3.jar |
| 9    | javax.activation-api-1.2.0.jar                        | 5e50e56bcf4a3ef3bc758f69f7643c3b | https://repo1.maven.org/maven2/javax/activation/javax.activation-api/1.2.0/javax.activation-api-1.2.0.jar |
| 10   | jaxb-api-2.3.1.jar                                    | bcf270d320f645ad19f5edb60091e87f | https://repo1.maven.org/maven2/javax/xml/bind/jaxb-api/2.3.1/jaxb-api-2.3.1.jar |
| 11   | jchardet-1.0.jar                                      | 90c63f0e53e6f714dbc7641e066620e4 | https://repo1.maven.org/maven2/net/sourceforge/jchardet/jchardet/1.0/jchardet-1.0.jar |
| 12   | jersey-apache-client4-1.19.1.jar                      | f51c2a3b49557e9a7b90e98095f6c045 | https://repo1.maven.org/maven2/com/sun/jersey/contribs/jersey-apache-client4/1.19.1/jersey-apache-client4-1.19.1.jar |
| 13   | jersey-client-1.19.1.jar                              | b712cd1d3bb4cef01bb6fc9d5d6ddbe8 | https://repo1.maven.org/maven2/com/sun/jersey/jersey-client/1.19.1/jersey-client-1.19.1.jar |
| 14   | jersey-core-1.19.1.jar                                | 577161779fabb561d73388d1ffc46b1f | https://repo1.maven.org/maven2/com/sun/jersey/jersey-core/1.19.1/jersey-core-1.19.1.jar |
| 15   | jsch-0.1.54.jar                                       | 56a6c6fc5819e21c665355b39b9097d8 | https://repo1.maven.org/maven2/com/jcraft/jsch/0.1.54/jsch-0.1.54.jar |
| 16   | jsr311-api-1.1.1.jar                                  | c9803468299ec255c047a280ddec510f | https://repo1.maven.org/maven2/javax/ws/rs/jsr311-api/1.1.1/jsr311-api-1.1.1.jar |
| 17   | jzlib-1.1.1.jar                                       | 553b605c56ec6f508ab46ed026e21622 | https://repo1.maven.org/maven2/com/jcraft/jzlib/1.1.1/jzlib-1.1.1.jar |
| 18   | LatencyUtils-2.0.3.jar                                | 2ad12e1ef7614cecfb0483fa9ac6da73 | https://repo1.maven.org/maven2/org/latencyutils/LatencyUtils/2.0.3/LatencyUtils-2.0.3.jar |
| 19   | logback-classic-1.2.3.jar                             | 64f7a68f931aed8e5ad8243470440f0b | https://repo1.maven.org/maven2/ch/qos/logback/logback-classic/1.2.3/logback-classic-1.2.3.jar |
| 20   | logback-core-1.2.3.jar                                | 841fc80c6edff60d947a3872a2db4d45 | https://repo1.maven.org/maven2/ch/qos/logback/logback-core/1.2.3/logback-core-1.2.3.jar |
| 21   | org.eclipse.jgit-5.1.3.201810200350-r.jar             | 3705263c16eda688ca65cf8952e083d2 | https://repo1.maven.org/maven2/org/eclipse/jgit/org.eclipse.jgit/5.1.3.201810200350-r/org.eclipse.jgit-5.1.3.201810200350-r.jar |
| 22   | org.eclipse.jgit.http.apache-5.1.3.201810200350-r.jar | 1625e427fdb663ebc495796939e6f42b | https://repo1.maven.org/maven2/org/eclipse/jgit/org.eclipse.jgit.http.apache/5.1.3.201810200350-r/org.eclipse.jgit.http.apache-5.1.3.201810200350-r.jar |
| 23   | reactive-streams-1.0.3.jar                            | 69122b098fff1c6b1bf2cd3b355e7e03 | https://repo1.maven.org/maven2/org/reactivestreams/reactive-streams/1.0.3/reactive-streams-1.0.3.jar |

补包操作：

```shell
#涉及操作的服务器： node1(中控机)
#定位到job组件目录，并创建目录
cd /data/src/job
mkdir -p job/backend/job-config/BOOT-INF/lib

#进入lib目录，并下载如上jar包文件
cd /data/src/job/backend/job-config/BOOT-INF/lib
wget *.jar

#注入
cd /data/src/job/backend/job-config/
zip -u0 job-config.jar BOOT-INF/lib/*.jar

#验证
#若开源jar包下载完整，注入过程无报错，此时\job\backend\job-config目录下的job-config.jar包即为可执行完整jar包
```

- job-crontab

| 序号 | Jar包名称                        | MD5                              | 下载地址                                                     |
| ---- | -------------------------------- | -------------------------------- | ------------------------------------------------------------ |
| 1    | annotations-2.0.0.jar            | 14a4ebc50afb20e9520fe502d231809d | https://repo1.maven.org/maven2/com/google/code/findbugs/annotations/2.0.0/annotations-2.0.0.jar |
| 2    | aspectjrt-1.9.6.jar              | 391f9257f19b84b45eb79a1878b9600a | https://repo1.maven.org/maven2/org/aspectj/aspectjrt/1.9.6/aspectjrt-1.9.6.jar |
| 3    | aspectjweaver-1.9.6.jar          | cc461d78c6b67a7c31712c694213b0e1 | https://repo1.maven.org/maven2/org/aspectj/aspectjweaver/1.9.6/aspectjweaver-1.9.6.jar |
| 4    | bcpkix-jdk15on-1.64.jar          | ac323fe2770d772e94bb7bc3249904e5 | https://repo1.maven.org/maven2/org/bouncycastle/bcpkix-jdk15on/1.64/bcpkix-jdk15on-1.64.jar |
| 5    | bcprov-jdk15on-1.64.jar          | 1d172df000184d005b49bc6d30892a05 | https://repo1.maven.org/maven2/org/bouncycastle/bcprov-jdk15on/1.64/bcprov-jdk15on-1.64.jar |
| 6    | c3p0-0.9.5.4.jar                 | 45fd4a89c9fd671a0d1dc97c0ec77abe | https://repo1.maven.org/maven2/com/mchange/c3p0/0.9.5.4/c3p0-0.9.5.4.jar |
| 7    | HdrHistogram-2.1.12.jar          | 4b1acf3448b750cb485da7e37384fcd8 | https://repo1.maven.org/maven2/org/hdrhistogram/HdrHistogram/2.1.12/HdrHistogram-2.1.12.jar |
| 8    | jakarta.activation-api-1.2.2.jar | 1cbb480310fa1987f9db7a3ed7118af7 | https://repo1.maven.org/maven2/jakarta/activation/jakarta.activation-api/1.2.2/jakarta.activation-api-1.2.2.jar |
| 9    | jakarta.annotation-api-1.3.5.jar | 8b165cf58df5f8c2a222f637c0a07c97 | https://repo1.maven.org/maven2/jakarta/annotation/jakarta.annotation-api/1.3.5/jakarta.annotation-api-1.3.5.jar |
| 10   | jakarta.el-3.0.3.jar             | 6bb54dbf912bf1b6c79592838db76b51 | https://repo1.maven.org/maven2/org/glassfish/jakarta.el/3.0.3/jakarta.el-3.0.3.jar |
| 11   | jakarta.xml.bind-api-2.3.3.jar   | 61286918ca0192e9f87d1358aef718dd | https://repo1.maven.org/maven2/jakarta/xml/bind/jakarta.xml.bind-api/2.3.3/jakarta.xml.bind-api-2.3.3.jar |
| 12   | javax.activation-api-1.2.0.jar   | 5e50e56bcf4a3ef3bc758f69f7643c3b | https://repo1.maven.org/maven2/javax/activation/javax.activation-api/1.2.0/javax.activation-api-1.2.0.jar |
| 13   | javax.servlet-api-4.0.1.jar      | b80414033bf3397de334b95e892a2f44 | https://repo1.maven.org/maven2/javax/servlet/javax.servlet-api/4.0.1/javax.servlet-api-4.0.1.jar |
| 14   | javax.ws.rs-api-2.0.jar          | 3bc8176d36becb7746e1f2594346ed66 | https://repo1.maven.org/maven2/javax/ws/rs/javax.ws.rs-api/2.0/javax.ws.rs-api-2.0.jar |
| 15   | jaxb-api-2.3.1.jar               | bcf270d320f645ad19f5edb60091e87f | https://repo1.maven.org/maven2/javax/xml/bind/jaxb-api/2.3.1/jaxb-api-2.3.1.jar |
| 16   | jchardet-1.0.jar                 | 90c63f0e53e6f714dbc7641e066620e4 | https://repo1.maven.org/maven2/net/sourceforge/jchardet/jchardet/1.0/jchardet-1.0.jar |
| 17   | jersey-apache-client4-1.19.1.jar | f51c2a3b49557e9a7b90e98095f6c045 | https://repo1.maven.org/maven2/com/sun/jersey/contribs/jersey-apache-client4/1.19.1/jersey-apache-client4-1.19.1.jar |
| 18   | jersey-client-1.19.1.jar         | b712cd1d3bb4cef01bb6fc9d5d6ddbe8 | https://repo1.maven.org/maven2/com/sun/jersey/jersey-client/1.19.1/jersey-client-1.19.1.jar |
| 19   | jersey-core-1.19.1.jar           | 577161779fabb561d73388d1ffc46b1f | https://repo1.maven.org/maven2/com/sun/jersey/jersey-core/1.19.1/jersey-core-1.19.1.jar |
| 20   | jsr311-api-1.1.1.jar             | c9803468299ec255c047a280ddec510f | https://repo1.maven.org/maven2/javax/ws/rs/jsr311-api/1.1.1/jsr311-api-1.1.1.jar |
| 21   | LatencyUtils-2.0.3.jar           | 2ad12e1ef7614cecfb0483fa9ac6da73 | https://repo1.maven.org/maven2/org/latencyutils/LatencyUtils/2.0.3/LatencyUtils-2.0.3.jar |
| 22   | logback-classic-1.2.3.jar        | 64f7a68f931aed8e5ad8243470440f0b | https://repo1.maven.org/maven2/ch/qos/logback/logback-classic/1.2.3/logback-classic-1.2.3.jar |
| 23   | logback-core-1.2.3.jar           | 841fc80c6edff60d947a3872a2db4d45 | https://repo1.maven.org/maven2/ch/qos/logback/logback-core/1.2.3/logback-core-1.2.3.jar |
| 24   | mchange-commons-java-0.2.15.jar  | 97c4575d9d49d9afb71492e6bb4417da | https://repo1.maven.org/maven2/com/mchange/mchange-commons-java/0.2.15/mchange-commons-java-0.2.15.jar |
| 25   | mysql-connector-java-8.0.22.jar  | 6eec5916bbd568c335f1737caa556d3d | https://repo1.maven.org/maven2/mysql/mysql-connector-java/8.0.22/mysql-connector-java-8.0.22.jar |
| 26   | reactive-streams-1.0.3.jar       | 69122b098fff1c6b1bf2cd3b355e7e03 | https://repo1.maven.org/maven2/org/reactivestreams/reactive-streams/1.0.3/reactive-streams-1.0.3.jar |

补包操作：

```shell
#涉及操作的服务器： node1(中控机)
#定位到job组件目录，并创建目录
cd /data/src/job
mkdir -p job/backend/job-crontab/BOOT-INF/lib

#进入lib目录，并下载如上jar包文件
cd /data/src/job/backend/job-crontab/BOOT-INF/lib
wget *.jar

#注入
cd /data/src/job/backend/job-crontab/
zip -u0 job-crontab.jar BOOT-INF/lib/*.jar

#验证
#若开源jar包下载完整，注入过程无报错，此时\job\backend\job-crontab目录下的job-crontab.jar包即为可执行完整jar包
```

- job-execute.jar

| 序号 | Jar包名称                        | MD5                              | 下载地址                                                     |
| ---- | -------------------------------- | -------------------------------- | ------------------------------------------------------------ |
| 1    | amqp-client-5.9.0.jar            | 49c1c0c7a8c5d1f8493ea57b0d256061 | https://repo1.maven.org/maven2/com/rabbitmq/amqp-client/5.9.0/amqp-client-5.9.0.jar |
| 2    | annotations-2.0.0.jar            | 14a4ebc50afb20e9520fe502d231809d | https://repo1.maven.org/maven2/com/google/code/findbugs/annotations/2.0.0/annotations-2.0.0.jar |
| 3    | aspectjrt-1.9.6.jar              | 391f9257f19b84b45eb79a1878b9600a | https://repo1.maven.org/maven2/org/aspectj/aspectjrt/1.9.6/aspectjrt-1.9.6.jar |
| 4    | aspectjweaver-1.9.6.jar          | cc461d78c6b67a7c31712c694213b0e1 | https://repo1.maven.org/maven2/org/aspectj/aspectjweaver/1.9.6/aspectjweaver-1.9.6.jar |
| 5    | bcpkix-jdk15on-1.64.jar          | ac323fe2770d772e94bb7bc3249904e5 | https://repo1.maven.org/maven2/org/bouncycastle/bcpkix-jdk15on/1.64/bcpkix-jdk15on-1.64.jar |
| 6    | bcprov-jdk15on-1.64.jar          | 1d172df000184d005b49bc6d30892a05 | https://repo1.maven.org/maven2/org/bouncycastle/bcprov-jdk15on/1.64/bcprov-jdk15on-1.64.jar |
| 7    | HdrHistogram-2.1.12.jar          | 4b1acf3448b750cb485da7e37384fcd8 | https://repo1.maven.org/maven2/org/hdrhistogram/HdrHistogram/2.1.12/HdrHistogram-2.1.12.jar |
| 8    | jakarta.activation-api-1.2.2.jar | 1cbb480310fa1987f9db7a3ed7118af7 | https://repo1.maven.org/maven2/jakarta/activation/jakarta.activation-api/1.2.2/jakarta.activation-api-1.2.2.jar |
| 9    | jakarta.annotation-api-1.3.5.jar | 8b165cf58df5f8c2a222f637c0a07c97 | https://repo1.maven.org/maven2/jakarta/annotation/jakarta.annotation-api/1.3.5/jakarta.annotation-api-1.3.5.jar |
| 10   | jakarta.el-3.0.3.jar             | 6bb54dbf912bf1b6c79592838db76b51 | https://repo1.maven.org/maven2/org/glassfish/jakarta.el/3.0.3/jakarta.el-3.0.3.jar |
| 11   | jakarta.xml.bind-api-2.3.3.jar   | 61286918ca0192e9f87d1358aef718dd | https://repo1.maven.org/maven2/jakarta/xml/bind/jakarta.xml.bind-api/2.3.3/jakarta.xml.bind-api-2.3.3.jar |
| 12   | javax.activation-api-1.2.0.jar   | 5e50e56bcf4a3ef3bc758f69f7643c3b | https://repo1.maven.org/maven2/javax/activation/javax.activation-api/1.2.0/javax.activation-api-1.2.0.jar |
| 13   | javax.servlet-api-4.0.1.jar      | b80414033bf3397de334b95e892a2f44 | https://repo1.maven.org/maven2/javax/servlet/javax.servlet-api/4.0.1/javax.servlet-api-4.0.1.jar |
| 14   | javax.ws.rs-api-2.0.jar          | 3bc8176d36becb7746e1f2594346ed66 | https://repo1.maven.org/maven2/javax/ws/rs/javax.ws.rs-api/2.0/javax.ws.rs-api-2.0.jar |
| 15   | jaxb-api-2.3.1.jar               | bcf270d320f645ad19f5edb60091e87f | https://repo1.maven.org/maven2/javax/xml/bind/jaxb-api/2.3.1/jaxb-api-2.3.1.jar |
| 16   | jchardet-1.0.jar                 | 90c63f0e53e6f714dbc7641e066620e4 | https://repo1.maven.org/maven2/net/sourceforge/jchardet/jchardet/1.0/jchardet-1.0.jar |
| 17   | jersey-apache-client4-1.19.1.jar | f51c2a3b49557e9a7b90e98095f6c045 | https://repo1.maven.org/maven2/com/sun/jersey/contribs/jersey-apache-client4/1.19.1/jersey-apache-client4-1.19.1.jar |
| 18   | jersey-client-1.19.1.jar         | b712cd1d3bb4cef01bb6fc9d5d6ddbe8 | https://repo1.maven.org/maven2/com/sun/jersey/jersey-client/1.19.1/jersey-client-1.19.1.jar |
| 19   | jersey-core-1.19.1.jar           | 577161779fabb561d73388d1ffc46b1f | https://repo1.maven.org/maven2/com/sun/jersey/jersey-core/1.19.1/jersey-core-1.19.1.jar |
| 20   | jsr311-api-1.1.1.jar             | c9803468299ec255c047a280ddec510f | https://repo1.maven.org/maven2/javax/ws/rs/jsr311-api/1.1.1/jsr311-api-1.1.1.jar |
| 21   | LatencyUtils-2.0.3.jar           | 2ad12e1ef7614cecfb0483fa9ac6da73 | https://repo1.maven.org/maven2/org/latencyutils/LatencyUtils/2.0.3/LatencyUtils-2.0.3.jar |
| 22   | logback-classic-1.2.3.jar        | 64f7a68f931aed8e5ad8243470440f0b | https://repo1.maven.org/maven2/ch/qos/logback/logback-classic/1.2.3/logback-classic-1.2.3.jar |
| 23   | logback-core-1.2.3.jar           | 841fc80c6edff60d947a3872a2db4d45 | https://repo1.maven.org/maven2/ch/qos/logback/logback-core/1.2.3/logback-core-1.2.3.jar |
| 24   | mysql-connector-java-8.0.22.jar  | 6eec5916bbd568c335f1737caa556d3d | https://repo1.maven.org/maven2/mysql/mysql-connector-java/8.0.22/mysql-connector-java-8.0.22.jar |
| 25   | reactive-streams-1.0.3.jar       | 69122b098fff1c6b1bf2cd3b355e7e03 | https://repo1.maven.org/maven2/org/reactivestreams/reactive-streams/1.0.3/reactive-streams-1.0.3.jar |

补包操作：

```shell
#涉及操作的服务器： node1(中控机)
#定位到job组件目录，并创建目录
cd /data/src/job
mkdir -p job/backend/job-execute/BOOT-INF/lib

#进入lib目录，并下载如上jar包文件
cd /data/src/job/backend/job-execute/BOOT-INF/lib
wget *.jar

#注入
cd /data/src/job/backend/job-execute/
zip -u0 job-execute.jar BOOT-INF/lib/*.jar

#验证
#若开源jar包下载完整，注入过程无报错，此时\job\backend\job-execute目录下的job-execute.jar包即为可执行完整jar包
```

- job-gateway.jar

| 序号 | Jar包名称                        | MD5                              | 下载地址                                                     |
| ---- | -------------------------------- | -------------------------------- | ------------------------------------------------------------ |
| 1    | amqp-client-5.9.0.jar            | 49c1c0c7a8c5d1f8493ea57b0d256061 | https://repo1.maven.org/maven2/com/rabbitmq/amqp-client/5.9.0/amqp-client-5.9.0.jar |
| 2    | annotations-2.0.0.jar            | 14a4ebc50afb20e9520fe502d231809d | https://repo1.maven.org/maven2/com/google/code/findbugs/annotations/2.0.0/annotations-2.0.0.jar |
| 3    | aspectjrt-1.9.6.jar              | 391f9257f19b84b45eb79a1878b9600a | https://repo1.maven.org/maven2/org/aspectj/aspectjrt/1.9.6/aspectjrt-1.9.6.jar |
| 4    | aspectjweaver-1.9.6.jar          | cc461d78c6b67a7c31712c694213b0e1 | https://repo1.maven.org/maven2/org/aspectj/aspectjweaver/1.9.6/aspectjweaver-1.9.6.jar |
| 5    | bcpkix-jdk15on-1.64.jar          | ac323fe2770d772e94bb7bc3249904e5 | https://repo1.maven.org/maven2/org/bouncycastle/bcpkix-jdk15on/1.64/bcpkix-jdk15on-1.64.jar |
| 6    | bcprov-jdk15on-1.64.jar          | 1d172df000184d005b49bc6d30892a05 | https://repo1.maven.org/maven2/org/bouncycastle/bcprov-jdk15on/1.64/bcprov-jdk15on-1.64.jar |
| 7    | HdrHistogram-2.1.12.jar          | 4b1acf3448b750cb485da7e37384fcd8 | https://repo1.maven.org/maven2/org/hdrhistogram/HdrHistogram/2.1.12/HdrHistogram-2.1.12.jar |
| 8    | jakarta.activation-api-1.2.2.jar | 1cbb480310fa1987f9db7a3ed7118af7 | https://repo1.maven.org/maven2/jakarta/activation/jakarta.activation-api/1.2.2/jakarta.activation-api-1.2.2.jar |
| 9    | jakarta.annotation-api-1.3.5.jar | 8b165cf58df5f8c2a222f637c0a07c97 | https://repo1.maven.org/maven2/jakarta/annotation/jakarta.annotation-api/1.3.5/jakarta.annotation-api-1.3.5.jar |
| 10   | jakarta.el-3.0.3.jar             | 6bb54dbf912bf1b6c79592838db76b51 | https://repo1.maven.org/maven2/org/glassfish/jakarta.el/3.0.3/jakarta.el-3.0.3.jar |
| 11   | jakarta.xml.bind-api-2.3.3.jar   | 61286918ca0192e9f87d1358aef718dd | https://repo1.maven.org/maven2/jakarta/xml/bind/jakarta.xml.bind-api/2.3.3/jakarta.xml.bind-api-2.3.3.jar |
| 12   | javax.activation-api-1.2.0.jar   | 5e50e56bcf4a3ef3bc758f69f7643c3b | https://repo1.maven.org/maven2/javax/activation/javax.activation-api/1.2.0/javax.activation-api-1.2.0.jar |
| 13   | javax.servlet-api-4.0.1.jar      | b80414033bf3397de334b95e892a2f44 | https://repo1.maven.org/maven2/javax/servlet/javax.servlet-api/4.0.1/javax.servlet-api-4.0.1.jar |
| 14   | javax.ws.rs-api-2.0.jar          | 3bc8176d36becb7746e1f2594346ed66 | https://repo1.maven.org/maven2/javax/ws/rs/javax.ws.rs-api/2.0/javax.ws.rs-api-2.0.jar |
| 15   | jaxb-api-2.3.1.jar               | bcf270d320f645ad19f5edb60091e87f | https://repo1.maven.org/maven2/javax/xml/bind/jaxb-api/2.3.1/jaxb-api-2.3.1.jar |
| 16   | jchardet-1.0.jar                 | 90c63f0e53e6f714dbc7641e066620e4 | https://repo1.maven.org/maven2/net/sourceforge/jchardet/jchardet/1.0/jchardet-1.0.jar |
| 17   | jersey-apache-client4-1.19.1.jar | f51c2a3b49557e9a7b90e98095f6c045 | https://repo1.maven.org/maven2/com/sun/jersey/contribs/jersey-apache-client4/1.19.1/jersey-apache-client4-1.19.1.jar |
| 18   | jersey-client-1.19.1.jar         | b712cd1d3bb4cef01bb6fc9d5d6ddbe8 | https://repo1.maven.org/maven2/com/sun/jersey/jersey-client/1.19.1/jersey-client-1.19.1.jar |
| 19   | jersey-core-1.19.1.jar           | 577161779fabb561d73388d1ffc46b1f | https://repo1.maven.org/maven2/com/sun/jersey/jersey-core/1.19.1/jersey-core-1.19.1.jar |
| 20   | jsr311-api-1.1.1.jar             | c9803468299ec255c047a280ddec510f | https://repo1.maven.org/maven2/javax/ws/rs/jsr311-api/1.1.1/jsr311-api-1.1.1.jar |
| 21   | LatencyUtils-2.0.3.jar           | 2ad12e1ef7614cecfb0483fa9ac6da73 | https://repo1.maven.org/maven2/org/latencyutils/LatencyUtils/2.0.3/LatencyUtils-2.0.3.jar |
| 22   | logback-classic-1.2.3.jar        | 64f7a68f931aed8e5ad8243470440f0b | https://repo1.maven.org/maven2/ch/qos/logback/logback-classic/1.2.3/logback-classic-1.2.3.jar |
| 23   | logback-core-1.2.3.jar           | 841fc80c6edff60d947a3872a2db4d45 | https://repo1.maven.org/maven2/ch/qos/logback/logback-core/1.2.3/logback-core-1.2.3.jar |
| 24   | mysql-connector-java-8.0.22.jar  | 6eec5916bbd568c335f1737caa556d3d | https://repo1.maven.org/maven2/mysql/mysql-connector-java/8.0.22/mysql-connector-java-8.0.22.jar |
| 25   | reactive-streams-1.0.3.jar       | 69122b098fff1c6b1bf2cd3b355e7e03 | https://repo1.maven.org/maven2/org/reactivestreams/reactive-streams/1.0.3/reactive-streams-1.0.3.jar |

补包操作：

```shell
#涉及操作的服务器： node1(中控机)
#定位到job组件目录，并创建目录
cd /data/src/job
mkdir -p job/backend/job-gateway/BOOT-INF/lib

#进入lib目录，并下载如上jar包文件
cd /data/src/job/backend/job-gateway/BOOT-INF/lib
wget *.jar

#注入
cd /data/src/job/backend/job-gateway/
zip -u0 job-gateway.jar BOOT-INF/lib/*.jar

#验证
#若开源jar包下载完整，注入过程无报错，此时\job\backend\job-gateway目录下的job-gateway.jar包即为可执行完整jar包
```

- job-logsvr.jar

| 序号 | Jar包名称                        | MD5                              | 下载地址                                                     |
| ---- | -------------------------------- | -------------------------------- | ------------------------------------------------------------ |
| 1    | annotations-2.0.0.jar            | 14a4ebc50afb20e9520fe502d231809d | https://repo1.maven.org/maven2/com/google/code/findbugs/annotations/2.0.0/annotations-2.0.0.jar |
| 2    | aspectjrt-1.9.6.jar              | 391f9257f19b84b45eb79a1878b9600a | https://repo1.maven.org/maven2/org/aspectj/aspectjrt/1.9.6/aspectjrt-1.9.6.jar |
| 3    | aspectjweaver-1.9.6.jar          | cc461d78c6b67a7c31712c694213b0e1 | https://repo1.maven.org/maven2/org/aspectj/aspectjweaver/1.9.6/aspectjweaver-1.9.6.jar |
| 4    | bcpkix-jdk15on-1.64.jar          | ac323fe2770d772e94bb7bc3249904e5 | https://repo1.maven.org/maven2/org/bouncycastle/bcpkix-jdk15on/1.64/bcpkix-jdk15on-1.64.jar |
| 5    | bcprov-jdk15on-1.64.jar          | 1d172df000184d005b49bc6d30892a05 | https://repo1.maven.org/maven2/org/bouncycastle/bcprov-jdk15on/1.64/bcprov-jdk15on-1.64.jar |
| 6    | HdrHistogram-2.1.12.jar          | 4b1acf3448b750cb485da7e37384fcd8 | https://repo1.maven.org/maven2/org/hdrhistogram/HdrHistogram/2.1.12/HdrHistogram-2.1.12.jar |
| 7    | jakarta.annotation-api-1.3.5.jar | 8b165cf58df5f8c2a222f637c0a07c97 | https://repo1.maven.org/maven2/jakarta/annotation/jakarta.annotation-api/1.3.5/jakarta.annotation-api-1.3.5.jar |
| 8    | jakarta.el-3.0.3.jar             | 6bb54dbf912bf1b6c79592838db76b51 | https://repo1.maven.org/maven2/org/glassfish/jakarta.el/3.0.3/jakarta.el-3.0.3.jar |
| 9    | javax.activation-api-1.2.0.jar   | 5e50e56bcf4a3ef3bc758f69f7643c3b | https://repo1.maven.org/maven2/javax/activation/javax.activation-api/1.2.0/javax.activation-api-1.2.0.jar |
| 10   | javax.ws.rs-api-2.0.jar          | 3bc8176d36becb7746e1f2594346ed66 | https://repo1.maven.org/maven2/javax/ws/rs/javax.ws.rs-api/2.0/javax.ws.rs-api-2.0.jar |
| 11   | jaxb-api-2.3.1.jar               | bcf270d320f645ad19f5edb60091e87f | https://repo1.maven.org/maven2/javax/xml/bind/jaxb-api/2.3.1/jaxb-api-2.3.1.jar |
| 12   | jchardet-1.0.jar                 | 90c63f0e53e6f714dbc7641e066620e4 | https://repo1.maven.org/maven2/net/sourceforge/jchardet/jchardet/1.0/jchardet-1.0.jar |
| 13   | jersey-apache-client4-1.19.1.jar | f51c2a3b49557e9a7b90e98095f6c045 | https://repo1.maven.org/maven2/com/sun/jersey/contribs/jersey-apache-client4/1.19.1/jersey-apache-client4-1.19.1.jar |
| 14   | jersey-client-1.19.1.jar         | b712cd1d3bb4cef01bb6fc9d5d6ddbe8 | https://repo1.maven.org/maven2/com/sun/jersey/jersey-client/1.19.1/jersey-client-1.19.1.jar |
| 15   | jersey-core-1.19.1.jar           | 577161779fabb561d73388d1ffc46b1f | https://repo1.maven.org/maven2/com/sun/jersey/jersey-core/1.19.1/jersey-core-1.19.1.jar |
| 16   | jsr311-api-1.1.1.jar             | c9803468299ec255c047a280ddec510f | https://repo1.maven.org/maven2/javax/ws/rs/jsr311-api/1.1.1/jsr311-api-1.1.1.jar |
| 17   | LatencyUtils-2.0.3.jar           | 2ad12e1ef7614cecfb0483fa9ac6da73 | https://repo1.maven.org/maven2/org/latencyutils/LatencyUtils/2.0.3/LatencyUtils-2.0.3.jar |
| 18   | logback-classic-1.2.3.jar        | 64f7a68f931aed8e5ad8243470440f0b | https://repo1.maven.org/maven2/ch/qos/logback/logback-classic/1.2.3/logback-classic-1.2.3.jar |
| 19   | logback-core-1.2.3.jar           | 841fc80c6edff60d947a3872a2db4d45 | https://repo1.maven.org/maven2/ch/qos/logback/logback-core/1.2.3/logback-core-1.2.3.jar |
| 20   | reactive-streams-1.0.3.jar       | 69122b098fff1c6b1bf2cd3b355e7e03 | https://repo1.maven.org/maven2/org/reactivestreams/reactive-streams/1.0.3/reactive-streams-1.0.3.jar |

补包操作：

```shell
#涉及操作的服务器： node1(中控机)
#定位到job组件目录，并创建目录
cd /data/src/job
mkdir -p job/backend/job-logsvr/BOOT-INF/lib

#进入lib目录，并下载如上jar包文件
cd /data/src/job/backend/job-logsvr/BOOT-INF/lib
wget *.jar

#注入
cd /data/src/job/backend/job-logsvr/
zip -u0 job-logsvr.jar BOOT-INF/lib/*.jar

#验证
#若开源jar包下载完整，注入过程无报错，此时\job\backend\job-logsvr目录下的job-logsvr.jar包即为可执行完整jar包
```

- job-manage.jar

| 序号 | Jar包名称                        | MD5                              | 下载地址                                                     |
| ---- | -------------------------------- | -------------------------------- | ------------------------------------------------------------ |
| 1    | amqp-client-5.9.0.jar            | 49c1c0c7a8c5d1f8493ea57b0d256061 | https://repo1.maven.org/maven2/com/rabbitmq/amqp-client/5.9.0/amqp-client-5.9.0.jar |
| 2    | annotations-2.0.0.jar            | 14a4ebc50afb20e9520fe502d231809d | https://repo1.maven.org/maven2/com/google/code/findbugs/annotations/2.0.0/annotations-2.0.0.jar |
| 3    | aspectjrt-1.9.6.jar              | 391f9257f19b84b45eb79a1878b9600a | https://repo1.maven.org/maven2/org/aspectj/aspectjrt/1.9.6/aspectjrt-1.9.6.jar |
| 4    | aspectjweaver-1.9.6.jar          | cc461d78c6b67a7c31712c694213b0e1 | https://repo1.maven.org/maven2/org/aspectj/aspectjweaver/1.9.6/aspectjweaver-1.9.6.jar |
| 5    | bcpkix-jdk15on-1.64.jar          | ac323fe2770d772e94bb7bc3249904e5 | https://repo1.maven.org/maven2/org/bouncycastle/bcpkix-jdk15on/1.64/bcpkix-jdk15on-1.64.jar |
| 6    | bcprov-jdk15on-1.64.jar          | 1d172df000184d005b49bc6d30892a05 | https://repo1.maven.org/maven2/org/bouncycastle/bcprov-jdk15on/1.64/bcprov-jdk15on-1.64.jar |
| 7    | HdrHistogram-2.1.12.jar          | 4b1acf3448b750cb485da7e37384fcd8 | https://repo1.maven.org/maven2/org/hdrhistogram/HdrHistogram/2.1.12/HdrHistogram-2.1.12.jar |
| 8    | jakarta.activation-api-1.2.2.jar | 1cbb480310fa1987f9db7a3ed7118af7 | https://repo1.maven.org/maven2/jakarta/activation/jakarta.activation-api/1.2.2/jakarta.activation-api-1.2.2.jar |
| 9    | jakarta.annotation-api-1.3.5.jar | 8b165cf58df5f8c2a222f637c0a07c97 | https://repo1.maven.org/maven2/jakarta/annotation/jakarta.annotation-api/1.3.5/jakarta.annotation-api-1.3.5.jar |
| 10   | jakarta.el-3.0.3.jar             | 6bb54dbf912bf1b6c79592838db76b51 | https://repo1.maven.org/maven2/org/glassfish/jakarta.el/3.0.3/jakarta.el-3.0.3.jar |
| 11   | jakarta.xml.bind-api-2.3.3.jar   | 61286918ca0192e9f87d1358aef718dd | https://repo1.maven.org/maven2/jakarta/xml/bind/jakarta.xml.bind-api/2.3.3/jakarta.xml.bind-api-2.3.3.jar |
| 12   | javax.activation-api-1.2.0.jar   | 5e50e56bcf4a3ef3bc758f69f7643c3b | https://repo1.maven.org/maven2/javax/activation/javax.activation-api/1.2.0/javax.activation-api-1.2.0.jar |
| 13   | javax.servlet-api-4.0.1.jar      | b80414033bf3397de334b95e892a2f44 | https://repo1.maven.org/maven2/javax/servlet/javax.servlet-api/4.0.1/javax.servlet-api-4.0.1.jar |
| 14   | javax.ws.rs-api-2.0.jar          | 3bc8176d36becb7746e1f2594346ed66 | https://repo1.maven.org/maven2/javax/ws/rs/javax.ws.rs-api/2.0/javax.ws.rs-api-2.0.jar |
| 15   | jaxb-api-2.3.1.jar               | bcf270d320f645ad19f5edb60091e87f | https://repo1.maven.org/maven2/javax/xml/bind/jaxb-api/2.3.1/jaxb-api-2.3.1.jar |
| 16   | jchardet-1.0.jar                 | 90c63f0e53e6f714dbc7641e066620e4 | https://repo1.maven.org/maven2/net/sourceforge/jchardet/jchardet/1.0/jchardet-1.0.jar |
| 17   | jersey-apache-client4-1.19.1.jar | f51c2a3b49557e9a7b90e98095f6c045 | https://repo1.maven.org/maven2/com/sun/jersey/contribs/jersey-apache-client4/1.19.1/jersey-apache-client4-1.19.1.jar |
| 18   | jersey-client-1.19.1.jar         | b712cd1d3bb4cef01bb6fc9d5d6ddbe8 | https://repo1.maven.org/maven2/com/sun/jersey/jersey-client/1.19.1/jersey-client-1.19.1.jar |
| 19   | jersey-core-1.19.1.jar           | 577161779fabb561d73388d1ffc46b1f | https://repo1.maven.org/maven2/com/sun/jersey/jersey-core/1.19.1/jersey-core-1.19.1.jar |
| 20   | jsr311-api-1.1.1.jar             | c9803468299ec255c047a280ddec510f | https://repo1.maven.org/maven2/javax/ws/rs/jsr311-api/1.1.1/jsr311-api-1.1.1.jar |
| 21   | LatencyUtils-2.0.3.jar           | 2ad12e1ef7614cecfb0483fa9ac6da73 | https://repo1.maven.org/maven2/org/latencyutils/LatencyUtils/2.0.3/LatencyUtils-2.0.3.jar |
| 22   | logback-classic-1.2.3.jar        | 64f7a68f931aed8e5ad8243470440f0b | https://repo1.maven.org/maven2/ch/qos/logback/logback-classic/1.2.3/logback-classic-1.2.3.jar |
| 23   | logback-core-1.2.3.jar           | 841fc80c6edff60d947a3872a2db4d45 | https://repo1.maven.org/maven2/ch/qos/logback/logback-core/1.2.3/logback-core-1.2.3.jar |
| 24   | mysql-connector-java-8.0.22.jar  | 6eec5916bbd568c335f1737caa556d3d | https://repo1.maven.org/maven2/mysql/mysql-connector-java/8.0.22/mysql-connector-java-8.0.22.jar |
| 25   | reactive-streams-1.0.3.jar       | 69122b098fff1c6b1bf2cd3b355e7e03 | https://repo1.maven.org/maven2/org/reactivestreams/reactive-streams/1.0.3/reactive-streams-1.0.3.jar |

补包操作：

```shell
#涉及操作的服务器： node1(中控机)
#定位到job组件目录，并创建目录
cd /data/src/job
mkdir -p job/backend/job-manage/BOOT-INF/lib

#进入lib目录，并下载如上jar包文件
cd /data/src/job/backend/job-manage/BOOT-INF/lib
wget *.jar

#注入
cd /data/src/job/backend/job-manage/
zip -u0 job-manage.jar BOOT-INF/lib/*.jar

#验证
#若开源jar包下载完整，注入过程无报错，此时\job\backend\job-manage目录下的job-manage.jar包即为可执行完整jar包
```

### 7.开始部署

检查资源依赖，并安装服务器环境所需资源

```shell
cd /data/install
./bk_install common 
```

资源初始化检查

```shell
./health_check/check_bk_controller.sh
---
[root@vm-11b-0pm4f install]# ./health_check/check_bk_controller.sh
start <<check_ssh_nopass>> ... [OK]
start <<check_hostname_uniq>> ... [OK]
start <<check_cert_mac>> ... [OK]
start <<check_install_config>> ... [OK]
start <<check_domain>> ... [OK]
start <<check_src_dir>> ... [OK]
```

paas部署

```shell
#安装 paas 及依赖环境
./bk_install paas         
```

appo，appt部署

```shell
#安装 appo,appt 及依赖
./bk_install app_mgr      
```

 cmdb部署

```shell
#安装 cmdb 及依赖环境
./bk_install cmdb         
```

job 部署

```shell
#安装 job 及依赖环境
./bk_install job          
```

bk monitor部署

```shell
#安装 bkmonitorv3 及依赖环境
./bk_install bkmonitorv3  
```

bknodeman 部署

```shell
#安装 bknodeman 及依赖环境
./bk_install bknodeman    
```

bklog 部署

```shell
#安装 bklog 及依赖环境
./bk_install bklog        
```

paas_plugins部署

```shell
 #安装 paas_plugins 及依赖环境
 ./bk_install paas_plugin  
```

fta 部署

```shell
#安装 故障自愈后台
./bk_install fta          
```

saas应用部署

```shell
#从后台部署 saas 应
./bk_install saas-o
```



### 8.访问验证

```shell
103.79.25.66  paas.aiops365.cn cmdb.aiops365.cn
103.79.25.67  job.aiops365.cn  jobapi.aiops365.cn
175.102.179.74  nodeman.aiops365.cn
```

  

部署中遇到的问题：

- 蓝鲸3.0.1 用户名不匹配，但获取正确

**问题：**

为非码客户部署完成蓝鲸3.0.1，在paas平台访问登陆时，出现无法登陆，排查配置文件中的用户名和密码正确。

![image-20210429115442473](https://tva1.sinaimg.cn/large/008i3skNgy1gq0h5l4nmsj30lw0az0yq.jpg)

```shell
#中控机
cat /data/install/bin/``03``-/global.env
```

**分析：**

1.重新部署蓝鲸3.0.1 ，问题依然存在，排查部署工程师操作上的错误。

2.蓝鲸3.0.1目前属于rc版本，可能存在bug缺陷

**解决：**

```shell
#登陆到usermgr模块的服务器下，执行如下命令，设修改密码为admin
#中控机
grep usermgr /data/install/install.conf

#登陆usermgr
workon usermgr-api
export BK_FILE_PATH="/data/bkee/usermgr/cert/saas_priv.txt"
export DJANGO_SETTINGS_MODULE="config.ee.prod"
python manage.py shell

from bkuser.profiles.models import Profile
from django.contrib.auth.hashers import make_password
admin = Profile.objects.get(username='admin', domain='default.local')
admin.password = make_password("admin")
admin.save()
```

**验证：**

使用如上设置的用户名和密码登陆paas平台，验证通过，如下图：

![image-20210429115756531](https://tva1.sinaimg.cn/large/008i3skNly1gq0h8th5abj30m50b4adi.jpg)



