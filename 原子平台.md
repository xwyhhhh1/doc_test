## 原子平台层

### 1.Paas平台

#### 1.1产品介绍

+ 面向普通用户，提供通用的基础服务，比如身份认证，其他产品的快捷入口，以及其他的入口
   + ![image-20220228110934335](http://xwyhhhh1.test.upcdn.net/image-20220228110934335.png)
+ 面向开发者，Paas平台提供了开发者服务，有专门的开发者中心，里面提供了前后台开发框架（MagicBox）、以及一系列开发工具的下载资源；还包含了基础信息，如服务器信息，第三方服务地址和基础信息等，还有api接口，发布应用的渠道等等；从开发到发布到运维，提供了一站式简单操作。
   + ![image-20220228112657709](http://xwyhhhh1.test.upcdn.net/image-20220228112657709.png)
   + ![image-20220228112716406](http://xwyhhhh1.test.upcdn.net/image-20220228112716406.png)
+ 面向系统维护人员，提供了多种应用服务，如权限管理，用户管理，api控制管理，能够可视化的监察运行过的脚本服务，什么人做了什么事，执行了什么任务，什么业务给什么人做，给予相关权限不相关的人没有权限操作此业务，任务结果和过程如何等等。高安全性，高透明性，减少了推锅矛盾，提高了整体效率。
   + ![image-20220228112757809](http://xwyhhhh1.test.upcdn.net/image-20220228112757809.png)

#### 1.2术语解释

+ 工作台：包含了所有应用列表，以及开发者中心的进入口，并且还有其他的快速入口
   + ![image-20220228113210359](http://xwyhhhh1.test.upcdn.net/image-20220228113210359.png)
+ Saas应用：或者可以称呼为app，是基于paas平台进行运行的应用，比如节点管理，标准运维，权限中心等等都是属于Saas应用
+ 开发环境：基于蓝鲸Paas进行saas开发，蓝鲸提供了本地开发环境，以及应用发布的测试环境，还有正式上线的环境
+ MagicBox：前端工具集，是一款免费的、在线的前端产品，支持拖拽组件生产前端代码，可以帮助开发者快速构建 SaaS 的前端。
   + ![image-20220301163740006](http://xwyhhhh1.test.upcdn.net/image-20220301163740006.png)
+ 开发框架：是提高开发者研发效率的功能组件的集合，基于开发框架进行降低通用的研发难度。
   + ![image-20220301163908523](http://xwyhhhh1.test.upcdn.net/image-20220301163908523.png)

#### 1.3产品架构

+ paas提供给用户的不仅仅只有身份认证，还提供了高效便捷的应用，如系统运维人员的权限管理，用户中心，监控等等；还有开发框架，以及magicbox工具等等。
   + ![-w2020](http://xwyhhhh1.test.upcdn.net/Architecture.png)

#### 1.4场景案例

+ 部署Saas应用
   + ![image-20220301175147541](http://xwyhhhh1.test.upcdn.net/image-20220301175147541.png)
+ MagicBox工具
   + ![image-20220302091039846](http://xwyhhhh1.test.upcdn.net/image-20220302091039846.png)

### 2容器管理平台

#### 2.1产品介绍

+ 高度扩展可用、灵活易用的容器管理服务平台，支持社区原生 Kubernetes 编排引擎
+ 提供了简单的图形化操作界面，用户不需要去关注底层的基础设施，只需要简单的操作就能对容器进行批量化的管理，还可以使用各种组件服务
+ 三步运行容器服务创建集群---->创建集群模板---->实例化模板集群
  + ![img](ipic\15679996186125.jpg) 

#### 2.2相关术语（容器管理平台简称BCS）

- **容器编排引擎**：用于容器化应用的自动化部署、扩展和管理的工具或平台，目前行业主流的引擎 K8S。
- **集群**：容器运行所需要的物理机或虚拟机资源的集合。
- **节点**：一台已经注册到集群中的服务器，为集群提供计算资源。
- **应用**：由一组容器及服务构成集合，这个集合可以代表一个业务，或者业务的某个大区，在 K8S 中应用通常由工作负载（Workload）、服务（Service、Ingress）、配置（ConfigMap、Secret）构成。
- **模板集**：资源模板的集合，简化资源管理的复杂度。用户基于模板集可以实现应用的部署、升级等操作。
- **网络**：主要包含 **服务** 和 **负载均衡器** 的定义和管理，服务是由多个相同配置的容器和访问这些容器的规则组成的微服务，负载均衡器定义了访问规则的具体实现。
- **仓库**：用户存放 Docker 镜像、Helm Charts。

#### 2.3产品特性

##### 2.3.1集群管理

+ 用户能够通过蓝鲸容器服务简单高效的批量管理容器
+ 支持自定义主从节点，一键自动安装集群组件
+ 用户独占集群，保证安全隔离性
+ 能够动态的添加或者减少节点，依据需求而定
+ 能够对集群中的每个容器进行监控以及数据的图例化展示

##### 2.3.2模板管理

+ 提供在集群中部署资源的方案，支持设置容器编排的模板级和HelmChart。用户可以将同一套模板集或Helm Chart，实例化到不同的命名空间，通过模板变量，完成差异化的资源编排 
+ 支持设置的模板集或者Helm Chart的多版本管理
+ 支持通过命名空间管理不同的环境

##### 2.3.3应用管理

+ 为用户提供了对容器各个编排维度的信息和状态，提供了批量或者单独对容器进行操作的方案
+ 提供了视图界面图形化管理容器
+ 在此界面能够查看应用、POD、容器等的在线状态
+ 进行启停容器，重新调度容器
+ 对应用做更新，例如扩缩容、滚动升级等

##### 2.3.4镜像管理

+ 为用户提供了镜像仓库，包括公共和私有，私有库需要相应权限访问
+ 公共镜像中包含了一些实用程度较高，并且开源的镜像
+ 项目镜像，是项目成员主动添加的镜像，或者是通过CI流程归档的私有镜像。项目镜像只有项目中指定的权限所有者才能访问。

##### 2.3.5网络管理

+ 网络管理提供了用户管理服务和负载均衡器的方案。用户通过网络管理可以查看线上服务的状态和负载均衡器的状态 
+ 查看服务的列表，以及每个服务的详细信息 
+ 对服务进行操作，例如更新服务或者停止服务
+ 查看线上负载均衡器列表，及每个负载均衡器的详细信息
+ 启动、删除或者更新负载均衡器

#### 2.4产品优势

+ 支持原生kubernetes容器编排方案
+ 基于 Kubernetes，基于 Docker 的服务生态

#### 2.5产品开源

+ 目前BCS已开源

#### 2.6产品架构

+ ![img](ipic\BCS在蓝鲸中的位置.png) 
+ BCS由saas和BCS后台组成，SaaS包含了项目管理系统（bcs-projmgr）、容器服务产品层主体功能模块（bcs-app）、底层的配置中心模块（bcs-cc）还有监控中心了，同时也依赖着蓝鲸体系下的其它产品服务

  + saas应用图
  + ![img](ipic\15674159010680-1646728167006.jpg) 
+ SaaS所需要的依赖的其它蓝鲸服务

  + bk-PaaS：为 BCS SaaS 提供了 4 大服务(统一登录、开发者中心、ESB 和应用引擎)，其中 bcs-app 由应用引擎托管 
  + bk-bcs-services：BCS 底层服务。作为后台服务，bk-bcs-services 给 bcs-app 提供了集群搭建，应用编排等丰富的底层接口。
  + bk-iam：蓝鲸权限中心，BCS SaaS 基于 bk-iam，实现了用户与平台资源之间的权限控制
  + bk-Habor：蓝鲸容器管理平台镜像仓库服务。bcs-app 使用 bk-Habor 提供的 API，实现了业务镜像的查询与配置功能

  + SaaS依赖后端服务bk-bcs-services,目前这些后端服务已经开源，bk-iam还有一些其它的系统暂时没有开源，因为这些必须要依托蓝鲸独立部署版本进行搭建
  + ![img](ipic\15677593863168.jpg) 

+ BCS整体后台架构:BCS client 或者其它业务saas服务通过api接入，api根据访问的集群将请求路由到BCS下的K8s集群中
  + ![-w2020](ipic\15674155869369.jpg) 
+ 
